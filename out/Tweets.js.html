<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Tweets.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Tweets.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import Toolbar from "@material-ui/core/Toolbar";

import AdminStyles from "../AdminStyles";
import AdminHeader from "../AdminComponents/AdminHeader";
import AdminSideBar from "../AdminComponents/AdminSideBar";
import BackgroundPaper from "../BackgroundPaper";
import ShowHide from "./Charts/ShowHide";
import axios from "../../axios";
import LoadingSpinner from "../AdminComponents/LoadingSpinner";

import classess from "./CommunStyles.module.css";

const Tweets = () => {
  const classes = AdminStyles();
  const [total, setTotal] = useState();
  const [avg, setAvg] = useState();
  const [isLoading, setIsLoading] = useState(true);

  /**@module AdminPage-TweetsPage */

  /**
   * @function GetTweetsStatistics
   * @name GetTweetsStatistics
   * @description Send the request to fetch tweets statistics on page loading
   */
  useEffect(() => {
    let request = {
      start_date: localStorage.getItem(`filter-From-date`),
      end_date: localStorage.getItem(`filter-To-date`),
    };

    if (
      localStorage.getItem(`filter-gender`) !== "" &amp;&amp;
      localStorage.getItem(`filter-gender`) !== "All"
    ) {
      request["gender"] = localStorage.getItem("filter-gender");
    }

    if (localStorage.getItem(`filter-regions`).length !== 0) {
      request["location"] = localStorage.getItem("filter-regions");
    }

    axios
      .post("/dashboard/tweets", request, {
        headers: { "Content-Type": "application/json" },
      })
      .then((response) => {
        // console.log(response);
        if (response.status === 200) {
          // console.log(response.data);
          setTotal(response.data.count);
          const avg = response.data.avgPerDay
            ? response.data.avgPerDay.toFixed(3)
            : 0;
          setAvg(avg);
          setIsLoading(false);
        }
      })
      .catch((err) => {
        // console.log(err);
      });
  }, []);

  const data_Bar = [
    {
      name: "Tweets",
      AveragePerDay: avg,
      TotalNumber: total,
    },
  ];

  const data_Pie = [
    { name: "Total Tweets", value: total },
    { name: "Avg Tweets", value: avg * 1 },
  ];

  return (
    &lt;div className={classes.root}>
      &lt;AdminHeader />
      &lt;AdminSideBar />
      &lt;main className={classes.content}>
        &lt;Toolbar />
        &lt;BackgroundPaper>
          &lt;h1 className={classess.header}>Tweets&lt;/h1>
          {isLoading &amp;&amp; &lt;LoadingSpinner />}
          {!isLoading &amp;&amp; &lt;ShowHide dataPie={data_Pie} dataBar={data_Bar} />}
        &lt;/BackgroundPaper>
      &lt;/main>
    &lt;/div>
  );
};

export default Tweets;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AdminPage-TweetsPage.html">AdminPage-TweetsPage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Tue May 24 2022 19:43:46 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
